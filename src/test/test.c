#include <check.h>
#include <stdio.h>
#include <unistd.h>

#include "../includes/carcass.h"
#include "../includes/parser.h"

START_TEST(test_isObjNum) {
  char symbol1 = 'r';

  int result = ft_isObjNum(&symbol1, 0) == 0;

  ck_assert_int_eq(result, 1);
}
END_TEST

START_TEST(test_parseCarcass) {
  int err = 0;
  CarcassTdef *data = NULL;
  char *filename = "cube.obj";
  err = parseCarcass(filename, &data);
  unsigned arrIndexRes[] = {
      1, 2, 2, 3, 3, 1, 7, 6, 6, 5, 5, 7, 4, 5, 5, 1, 1, 4, 5, 6, 6, 2, 2, 5,
      2, 6, 6, 7, 7, 2, 0, 3, 3, 7, 7, 0, 0, 1, 1, 3, 3, 0, 4, 7, 7, 5, 5, 4,
      0, 4, 4, 1, 1, 0, 1, 5, 5, 2, 2, 1, 3, 2, 2, 7, 7, 3, 4, 0, 0, 7, 7, 4};
  double arrVertexRes[] = {
      1.000000,  -1.000000, -1.000000, 1.000000,  -1.000000, 1.000000,
      -1.000000, -1.000000, 1.000000,  -1.000000, -1.000000, -1.000000,
      1.000000,  1.000000,  -1.000000, 1.000000,  1.000000,  1.000000,
      -1.000000, 1.000000,  1.000000,  -1.000000, 1.000000,  -1.000000};
  if (data && data->vertexes.array && data->facets.array && !err) {
    for (unsigned int i = 0; i < data->facets.amount * 2; i++) {
      if (data->facets.array[i] != arrIndexRes[i]) err = 1;
    }
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (data->vertexes.array[i] != arrVertexRes[i]) err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_translateCoord) {
  CarcassTdef *data = NULL;
  char *filename = "cube.obj";
  int err = parseCarcass(filename, &data);

  if (err == 0 && data && data->vertexes.array) {
    double arrVertexRes[] = {
        1.000000,  1.500000, -1.000000, 1.000000,  1.500000, 1.000000,
        -1.000000, 1.500000, 1.000000,  -1.000000, 1.500000, -1.000000,
        1.000000,  3.500000, -1.000000, 1.000000,  3.500000, 1.000000,
        -1.000000, 3.500000, 1.000000,  -1.000000, 3.500000, -1.000000};
    translateCoord(&data->vertexes, 1, 2.5);
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (data->vertexes.array[i] != arrVertexRes[i]) err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_scaleCarcass) {
  CarcassTdef *data = NULL;
  char *filename = "Rock.obj";
  int err = parseCarcass(filename, &data);

  if (err == 0 && data && data->vertexes.array) {
    double arrVertexRes[] = {
        -0.372535, 0.386866,  0.475685,  -0.646207, -0.045059, -0.546708,
        -0.280549, 0.498260,  0.442431,  0.315890,  -0.530149, 0.479840,
        -0.633619, 0.334426,  -0.039296, 0.347851,  -0.286982, 0.744363,
        -0.247293, -0.302378, -0.755719, 0.040290,  -0.366505, -0.769130,
        -0.549855, -0.540824, 0.317722,  -0.544759, -0.503186, 0.514156,
        0.487684,  0.191648,  -0.578965, 0.588321,  -0.261665, -0.604509,
        -0.527997, -0.286878, -0.632549, -0.553322, -0.374636, -0.497674,
        0.240093,  -0.459166, 0.670127,  -0.491933, 0.410214,  -0.402761,
        -0.094667, 0.577529,  -0.390777, 0.459960,  0.365877,  -0.487215,
        0.627283,  -0.437094, 0.425016,  0.584498,  -0.481185, 0.046691,
        -0.079001, 0.628872,  -0.106369, -0.028437, 0.634452,  0.239818,
        -0.520808, 0.467760,  -0.159878, -0.421599, 0.490650,  0.233486,
        0.319121,  0.591222,  0.297017,  0.338732,  0.570501,  -0.208032,
        0.066218,  -0.342127, 0.769130,  0.086493,  -0.116281, 0.755893,
        -0.296100, -0.278986, 0.747855,  0.448528,  -0.375481, 0.669877,
        0.474143,  0.018637,  0.663652,  0.102972,  0.541434,  0.477561,
        -0.214331, 0.428291,  0.526977,  -0.368463, -0.107630, 0.706359,
        -0.459220, -0.342135, 0.673922,  -0.253280, -0.427115, 0.705426,
        -0.761746, -0.286502, 0.175870,  -0.770057, -0.383267, 0.004655,
        -0.755684, 0.115458,  -0.168267, -0.551021, -0.111184, 0.567901,
        -0.655972, 0.307426,  -0.310333, -0.746683, -0.107048, -0.410571,
        -0.713896, -0.343155, -0.329286, -0.672191, -0.483426, 0.018302,
        -0.703338, -0.449621, 0.290452,  -0.321485, -0.499444, -0.290232,
        -0.124670, -0.540314, 0.140129,  0.243552,  -0.562820, 0.026289,
        0.219824,  -0.634452, -0.517833, 0.460450,  -0.627675, -0.398553,
        0.694974,  0.086656,  -0.410528, 0.632354,  0.293502,  -0.218871,
        0.778475,  -0.295667, -0.233435, 0.800000,  -0.151888, -0.071906,
        0.646147,  0.209521,  0.037278,  0.753100,  -0.355772, 0.123442,
        0.657388,  -0.404813, -0.451891, 0.728149,  -0.166653, -0.421536,
        -0.331637, -0.042091, -0.706366, 0.096244,  -0.023380, -0.717240,
        -0.518523, -0.082897, -0.652591, -0.462866, 0.344506,  -0.499945,
        0.238555,  0.378195,  -0.548035, 0.362179,  -0.256880, -0.730945,
        0.268320,  -0.538874, -0.665693, -0.010693, -0.494172, -0.689841,
        0.157422,  0.633578,  -0.195819, 0.530853,  0.389181,  -0.328037,
        0.326993,  0.494239,  -0.428733, 0.404647,  0.461654,  0.491504,
        0.603709,  -0.261299, 0.583953,  0.403815,  0.388368,  0.547171,
        -0.800000, -0.229665, -0.158988, -0.612848, -0.346435, 0.529220,
        0.447419,  -0.586348, -0.565536, 0.501135,  -0.480830, 0.545018,
        0.758969,  -0.226891, 0.222159,  0.586520,  -0.547500, -0.400943};
    scaleCarcass(&data->vertexes, 0.8);
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (fabs(fabs(data->vertexes.array[i]) - fabs(arrVertexRes[i])) > 0.0001)
        err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_rotateX) {
  CarcassTdef *data = NULL;
  char *filename = "Rock.obj";
  int err = parseCarcass(filename, &data);

  if (err == 0 && data && data->vertexes.array) {
    double arrVertexRes[] = {
        -0.465669, 0.662083,  -0.386075, -0.807759, -0.683895, -0.049764,
        -0.350686, 0.642492,  -0.530064, 0.394862,  0.490401,  0.747275,
        -0.792023, 0.015950,  -0.420606, 0.434813,  0.863984,  0.497957,
        -0.309116, -0.991645, 0.227736,  0.050362,  -1.020573, 0.304349,
        -0.687319, 0.288121,  0.729201,  -0.680949, 0.537981,  0.720591,
        0.609605,  -0.678093, -0.348326, 0.735401,  -0.797045, 0.206608,
        -0.659996, -0.836537, 0.232342,  -0.691653, -0.686882, 0.366732,
        0.300116,  0.739100,  0.696299,  -0.614916, -0.418331, -0.584288,
        -0.118334, -0.371269, -0.788618, 0.574950,  -0.531183, -0.545815,
        0.784104,  0.440634,  0.621777,  0.730622,  -0.035114, 0.603285,
        -0.098752, -0.010114, -0.797191, -0.035546, 0.418516,  -0.737334,
        -0.651010, -0.107265, -0.608529, -0.526999, 0.382969,  -0.560953,
        0.398901,  0.480823,  -0.672913, 0.423415,  -0.146926, -0.744702,
        0.082773,  0.883938,  0.570840,  0.108116,  0.911137,  0.289359,
        -0.370124, 0.869838,  0.488756,  0.560660,  0.754926,  0.592896,
        0.592678,  0.823230,  0.104944,  0.128715,  0.694202,  -0.576612,
        -0.267914, 0.733418,  -0.427348, -0.460579, 0.851629,  0.269123,
        -0.574026, 0.766352,  0.552492,  -0.316600, 0.788875,  0.663520,
        -0.952182, 0.161965,  0.387752,  -0.962571, -0.068151, 0.474248,
        -0.944605, -0.185554, -0.175039, -0.688776, 0.679942,  0.246816,
        -0.819965, -0.323997, -0.439519, -0.933354, -0.527712, 0.053045,
        -0.892370, -0.472846, 0.360320,  -0.840239, -0.070608, 0.600579,
        -0.879173, 0.272026,  0.611303,  -0.401856, -0.454748, 0.560872,
        -0.155837, 0.068885,  0.694328,  0.304440,  -0.076052, 0.700173,
        0.274780,  -0.761875, 0.683728,  0.575563,  -0.613253, 0.698357,
        0.868717,  -0.490310, -0.186180, 0.790442,  -0.213723, -0.404688,
        0.973093,  -0.345310, 0.320151,  1.000000,  -0.118093, 0.173724,
        0.807684,  0.086438,  -0.251578, 0.941375,  0.083858,  0.463194,
        0.821735,  -0.636157, 0.412829,  0.910187,  -0.552746, 0.124545,
        -0.414546, -0.880505, -0.084214, 0.120305,  -0.890328, -0.109419,
        -0.648153, -0.821960, -0.023448, -0.578583, -0.551026, -0.521875,
        0.298194,  -0.603923, -0.572754, 0.452724,  -0.952276, 0.176320,
        0.335400,  -0.926060, 0.537176,  -0.013367, -0.947265, 0.477310,
        0.196777,  -0.119682, -0.820251, 0.663566,  -0.330099, -0.543904,
        0.408742,  -0.434205, -0.693070, 0.505808,  0.696040,  -0.475392,
        0.754637,  0.670823,  0.435310,  0.504768,  0.750660,  -0.374148,
        -1.000000, -0.240639, 0.252990,  -0.766060, 0.586810,  0.529902,
        0.559273,  -0.811515, 0.615119,  0.626419,  0.580408,  0.698931,
        0.948712,  0.230627,  0.323055,  0.733150,  -0.600746, 0.598877};
    rotateX(data->vertexes.array, data->vertexes.amount * 3, 30);
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (fabs(fabs(data->vertexes.array[i]) - fabs(arrVertexRes[i])) > 0.0001)
        err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_rotateY) {
  CarcassTdef *data = NULL;
  char *filename = "Rock.obj";
  int err = parseCarcass(filename, &data);

  if (err == 0 && data && data->vertexes.array) {
    double arrVertexRes[] = {
        -0.659320, 0.483582,  -0.368377, 0.550609,  -0.056323, -0.903505,
        -0.600514, 0.622825,  -0.261182, -0.531713, -0.662686, 0.482656,
        -0.073639, 0.418032,  -0.790121, -0.852247, -0.358727, 0.573133,
        0.885661,  -0.377973, -0.451130, 0.957674,  -0.458131, -0.098540,
        -0.498420, -0.676031, -0.617831, -0.740040, -0.628983, -0.573662,
        0.809077,  0.239560,  0.490676,  0.860029,  -0.327081, 0.610041,
        0.679417,  -0.358598, -0.774062, 0.507958,  -0.468295, -0.779334,
        -0.781340, -0.573958, 0.425734,  0.402574,  0.512767,  -0.685214,
        0.464372,  0.721911,  -0.192265, 0.690417,  0.457346,  0.474127,
        -0.403963, -0.546367, 0.856669,  0.055035,  -0.601481, 0.730881,
        0.116137,  0.786090,  -0.118079, -0.301668, 0.793066,  0.011119,
        0.097036,  0.584700,  -0.674045, -0.369655, 0.613313,  -0.475672,
        -0.305296, 0.739027,  0.451396,  0.322240,  0.713126,  0.378235,
        -0.937138, -0.427659, 0.230081,  -0.916881, -0.145351, 0.252570,
        -0.980723, -0.348732, -0.221498, -0.740842, -0.469351, 0.683112,
        -0.728215, 0.023297,  0.713547,  -0.569952, 0.676793,  0.219255,
        -0.692164, 0.535364,  -0.163099, -0.943427, -0.134537, -0.318871,
        -0.920865, -0.427669, -0.437214, -0.920065, -0.533893, -0.176795,
        -0.364082, -0.358128, -0.906876, -0.154227, -0.479084, -0.950153,
        0.062109,  0.144322,  -0.965744, -0.807625, -0.138980, -0.571033,
        0.256792,  0.384282,  -0.869988, 0.363100,  -0.133810, -1.001347,
        0.269032,  -0.428944, -0.945181, -0.152212, -0.604282, -0.826654,
        -0.494333, -0.562026, -0.812647, 0.296461,  -0.624305, -0.453007,
        -0.197103, -0.675392, -0.126953, 0.014492,  -0.703524, 0.305865,
        0.681929,  -0.793066, 0.171646,  0.581010,  -0.784594, 0.491828,
        0.641020,  0.108320,  0.779164,  0.392241,  0.366877,  0.738780,
        0.438403,  -0.369584, 0.916437,  0.243058,  -0.189860, 0.974167,
        0.078546,  0.261901,  0.805205,  -0.007247, -0.444715, 0.953910,
        0.684857,  -0.506016, 0.724770,  0.661011,  -0.208316, 0.818015,
        0.808446,  -0.052613, -0.545782, 0.904377,  -0.029225, -0.019429,
        0.705998,  -0.103621, -0.766225, 0.528205,  0.430632,  -0.668055,
        0.722841,  0.472743,  0.188956,  0.972579,  -0.321100, 0.306369,
        0.873893,  -0.673593, 0.203031,  0.849919,  -0.617714, -0.146218,
        0.272198,  0.791973,  0.156665,  0.507495,  0.486476,  0.592374,
        0.592551,  0.617798,  0.321184,  -0.529005, 0.577068,  0.594524,
        -0.604802, -0.326624, 0.858200,  -0.597916, 0.485460,  0.604230,
        0.042105,  -0.287081, -1.018687, -0.771773, -0.433043, -0.654850,
        0.784728,  -0.732934, 0.443536,  -0.576493, -0.601037, 0.724009,
        -0.128034, -0.283614, 0.980192,  0.608270,  -0.684375, 0.647068};
    rotateY(data->vertexes.array, data->vertexes.amount * 3, 30);
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (fabs(fabs(data->vertexes.array[i]) - fabs(arrVertexRes[i])) > 0.0001)
        err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_rotateZ) {
  CarcassTdef *data = NULL;
  char *filename = "Rock.obj";
  int err = parseCarcass(filename, &data);

  if (err == 0 && data && data->vertexes.array) {
    double arrVertexRes[] = {
        0.405964,  0.534689,  0.594606,  -0.180247, 0.789404,  -0.683386,
        0.561277,  0.442561,  0.553039,  -0.593847, -0.492356, 0.599800,
        0.290858,  0.847026,  -0.049120, -0.287363, -0.484944, 0.930454,
        -0.421131, 0.247114,  -0.944648, -0.444880, -0.120427, -0.961412,
        -0.773959, 0.574814,  0.397153,  -0.726492, 0.575777,  0.642695,
        0.330725,  -0.565356, -0.723707, -0.209730, -0.777052, -0.755636,
        -0.456112, 0.596783,  -0.790686, -0.569379, 0.611140,  -0.622092,
        -0.520795, -0.385058, 0.837659,  0.411779,  0.686651,  -0.503451,
        0.695017,  0.228273,  -0.488471, 0.540559,  -0.497522, -0.609019,
        -0.418879, -0.858998, 0.531270,  -0.481583, -0.814657, 0.058363,
        0.761449,  0.218825,  -0.132961, 0.778091,  0.157453,  0.299772,
        0.477283,  0.733409,  -0.199847, 0.524682,  0.615296,  0.291857,
        0.791713,  -0.280131, 0.371271,  0.769903,  -0.308346, -0.260039,
        -0.409773, -0.147749, 0.961412,  -0.126935, -0.129243, 0.944866,
        -0.401651, 0.311902,  0.934819,  -0.377251, -0.626348, 0.837346,
        0.114439,  -0.581991, 0.829565,  0.688547,  -0.022778, 0.596951,
        0.487630,  0.347288,  0.658721,  -0.203972, 0.434314,  0.882949,
        -0.511095, 0.501187,  0.842403,  -0.576339, 0.230457,  0.881782,
        -0.500717, 0.885544,  0.219838,  -0.621828, 0.877151,  0.005818,
        -0.003112, 0.955561,  -0.210333, -0.243562, 0.659095,  0.709876,
        0.253202,  0.869427,  -0.387916, -0.276180, 0.901542,  -0.513214,
        -0.561460, 0.815524,  -0.411607, -0.726658, 0.736971,  0.022878,
        -0.690914, 0.781957,  0.363065,  -0.678820, 0.300746,  -0.362790,
        -0.691347, 0.049792,  0.175161,  -0.648144, -0.409316, 0.032861,
        -0.741189, -0.393823, -0.647291, -0.686422, -0.689699, -0.498191,
        0.241025,  -0.841611, -0.513161, 0.484413,  -0.724390, -0.273588,
        -0.215060, -1.018456, -0.291794, -0.033337, -1.017318, -0.089883,
        0.383353,  -0.757618, 0.046598,  -0.294184, -0.998706, 0.154302,
        -0.373206, -0.889954, -0.564864, -0.065426, -0.931426, -0.526919,
        -0.115928, 0.401469,  -0.882957, -0.010318, -0.123373, -0.896551,
        -0.202359, 0.624412,  -0.815739, 0.336231,  0.638084,  -0.624932,
        0.513082,  -0.221703, -0.685043, -0.247424, -0.496836, -0.913681,
        -0.613795, -0.435289, -0.832116, -0.612383, -0.082077, -0.862302,
        0.812847,  -0.072259, -0.244774, 0.583010,  -0.580585, -0.410047,
        0.673453,  -0.308553, -0.535916, 0.648183,  -0.410741, 0.614380,
        -0.206311, -0.795987, 0.729942,  0.557511,  -0.423844, 0.683963,
        -0.437896, 0.943749,  -0.198735, -0.546026, 0.690094,  0.661524,
        -0.637894, -0.665636, -0.706920, -0.497217, -0.711632, 0.681273,
        -0.133879, -0.981105, 0.277698,  -0.563095, -0.829942, -0.501179};
    rotateZ(data->vertexes.array, data->vertexes.amount * 3, 30);
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (fabs(fabs(data->vertexes.array[i]) - fabs(arrVertexRes[i])) > 0.0001)
        err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_restoreOrigin) {
  CarcassTdef *data = NULL;
  char *filename = "Rock.obj";
  int err = parseCarcass(filename, &data);

  if (err == 0 && data && data->vertexes.array) {
    double arrVertexRes[] = {
        -0.465669, 0.483582,  0.594606,  -0.807759, -0.056323, -0.683386,
        -0.350686, 0.622825,  0.553039,  0.394862,  -0.662686, 0.599800,
        -0.792023, 0.418032,  -0.049120, 0.434813,  -0.358727, 0.930454,
        -0.309116, -0.377973, -0.944648, 0.050362,  -0.458131, -0.961412,
        -0.687319, -0.676031, 0.397153,  -0.680949, -0.628983, 0.642695,
        0.609605,  0.239560,  -0.723707, 0.735401,  -0.327081, -0.755636,
        -0.659996, -0.358598, -0.790686, -0.691653, -0.468295, -0.622092,
        0.300116,  -0.573958, 0.837659,  -0.614916, 0.512767,  -0.503451,
        -0.118334, 0.721911,  -0.488471, 0.574950,  0.457346,  -0.609019,
        0.784104,  -0.546367, 0.531270,  0.730622,  -0.601481, 0.058363,
        -0.098752, 0.786090,  -0.132961, -0.035546, 0.793066,  0.299772,
        -0.651010, 0.584700,  -0.199847, -0.526999, 0.613313,  0.291857,
        0.398901,  0.739027,  0.371271,  0.423415,  0.713126,  -0.260039,
        0.082773,  -0.427659, 0.961412,  0.108116,  -0.145351, 0.944866,
        -0.370124, -0.348732, 0.934819,  0.560660,  -0.469351, 0.837346,
        0.592678,  0.023297,  0.829565,  0.128715,  0.676793,  0.596951,
        -0.267914, 0.535364,  0.658721,  -0.460579, -0.134537, 0.882949,
        -0.574026, -0.427669, 0.842403,  -0.316600, -0.533893, 0.881782,
        -0.952182, -0.358128, 0.219838,  -0.962571, -0.479084, 0.005818,
        -0.944605, 0.144322,  -0.210333, -0.688776, -0.138980, 0.709876,
        -0.819965, 0.384282,  -0.387916, -0.933354, -0.133810, -0.513214,
        -0.892370, -0.428944, -0.411607, -0.840239, -0.604282, 0.022878,
        -0.879173, -0.562026, 0.363065,  -0.401856, -0.624305, -0.362790,
        -0.155837, -0.675392, 0.175161,  0.304440,  -0.703524, 0.032861,
        0.274780,  -0.793066, -0.647291, 0.575563,  -0.784594, -0.498191,
        0.868717,  0.108320,  -0.513161, 0.790442,  0.366877,  -0.273588,
        0.973093,  -0.369584, -0.291794, 1.000000,  -0.189860, -0.089883,
        0.807684,  0.261901,  0.046598,  0.941375,  -0.444715, 0.154302,
        0.821735,  -0.506016, -0.564864, 0.910187,  -0.208316, -0.526919,
        -0.414546, -0.052613, -0.882957, 0.120305,  -0.029225, -0.896551,
        -0.648153, -0.103621, -0.815739, -0.578583, 0.430632,  -0.624932,
        0.298194,  0.472743,  -0.685043, 0.452724,  -0.321100, -0.913681,
        0.335400,  -0.673593, -0.832116, -0.013367, -0.617714, -0.862302,
        0.196777,  0.791973,  -0.244774, 0.663566,  0.486476,  -0.410047,
        0.408742,  0.617798,  -0.535916, 0.505808,  0.577068,  0.614380,
        0.754637,  -0.326624, 0.729942,  0.504768,  0.485460,  0.683963,
        -1.000000, -0.287081, -0.198735, -0.766060, -0.433043, 0.661524,
        0.559273,  -0.732934, -0.706920, 0.626419,  -0.601037, 0.681273,
        0.948712,  -0.283614, 0.277698,  0.733150,  -0.684375, -0.501179};
    rotateZ(data->vertexes.array, data->vertexes.amount * 3, 30);
    restoreOrigin(&data->vertexes);
    for (unsigned int i = 0; i < data->vertexes.amount * 3; i++) {
      if (fabs(fabs(data->vertexes.array[i]) - fabs(arrVertexRes[i])) > 0.0001)
        err = 1;
    }
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 0);
}
END_TEST

START_TEST(test_catchError) {
  CarcassTdef *data = NULL;
  char *filename = "wrong.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

START_TEST(test_catchError2) {
  CarcassTdef *data = NULL;
  char *filename = "wrong1.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

START_TEST(test_catchError3) {
  CarcassTdef *data = NULL;
  char *filename = "wrong3.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

START_TEST(test_catchError4) {
  CarcassTdef *data = NULL;
  char *filename = "wrong2.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

START_TEST(test_catchError5) {
  CarcassTdef *data = NULL;
  char *filename = "notexist.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

START_TEST(test_catchError6) {
  CarcassTdef *data = NULL;
  char *filename = "test.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

START_TEST(test_catchError7) {
  CarcassTdef *data = NULL;
  char *filename = "wrongCoordAmount.obj";
  int err = parseCarcass(filename, &data);
  if (err) {
    err = 1;
  }
  freeCarcass(&data);
  ck_assert_int_eq(err, 1);
}
END_TEST

int main(void) {
  Suite *s1 = suite_create("Core");
  TCase *tc1_1 = tcase_create("Core");
  SRunner *sr = srunner_create(s1);
  int nf;

  suite_add_tcase(s1, tc1_1);
  tcase_add_test(tc1_1, test_isObjNum);
  tcase_add_test(tc1_1, test_parseCarcass);
  tcase_add_test(tc1_1, test_translateCoord);
  tcase_add_test(tc1_1, test_scaleCarcass);
  tcase_add_test(tc1_1, test_rotateX);
  tcase_add_test(tc1_1, test_rotateY);
  tcase_add_test(tc1_1, test_rotateZ);
  tcase_add_test(tc1_1, test_restoreOrigin);
  tcase_add_test(tc1_1, test_catchError);
  tcase_add_test(tc1_1, test_catchError2);
  tcase_add_test(tc1_1, test_catchError3);
  tcase_add_test(tc1_1, test_catchError4);
  tcase_add_test(tc1_1, test_catchError5);
  tcase_add_test(tc1_1, test_catchError6);
  tcase_add_test(tc1_1, test_catchError7);

  srunner_run_all(sr, CK_ENV);
  nf = srunner_ntests_failed(sr);
  srunner_free(sr);

  return nf == 0 ? 0 : 1;
}